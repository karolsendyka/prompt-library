---
import type { PromptListDTO } from "@/types";

interface Props {
  prompts: PromptListDTO[];
}

const { prompts } = Astro.props;
---

<div class="space-y-4">
  {prompts.length === 0 ? (
    <div class="text-center text-muted-foreground py-8">
      <p class="text-lg font-semibold">No prompts found.</p>
      <p>Try adjusting your search or filters.</p>
    </div>
  ) : (
    <ul class="space-y-4">
      {prompts.map((prompt) => (
        <li class="border rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow">
          <a href={`/prompts/${prompt.id}`} class="block">
            <h2 class="font-semibold text-lg text-primary">{prompt.title}</h2>
          </a>
          <p class="text-muted-foreground text-sm mt-1">{prompt.description}</p>
          <div class="flex flex-wrap gap-2 mt-2">
            {prompt.tags.map((tag) => (
              <a href={`/list?tag=${tag}`} class="inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold
                transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2
                bg-secondary text-secondary-foreground hover:bg-secondary/80">
                {tag}
              </a>
            ))}
          </div>
          <div class="flex justify-between items-center mt-3 text-sm text-muted-foreground">
            <span>By {prompt.author_username}</span>
            <div class="flex items-center gap-2">
              <span class="font-bold">{prompt.vote_score} votes</span>
              {prompt.updated_at && prompt.updated_at !== prompt.created_at ? (
                <span>Updated: {new Date(prompt.updated_at).toLocaleDateString()}</span>
              ) : (
                <span>Created: {new Date(prompt.created_at).toLocaleDateString()}</span>
              )}
            </div>
          </div>
        </li>
      ))}
    </ul>
  )}
</div>
