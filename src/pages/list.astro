---
import { supabaseClient } from "@/db/supabase.client";
import { PromptService } from "@/lib/services/prompt.service";
import Layout from "../layouts/Layout.astro";
import PromptList from "../components/prompts/PromptList.astro";

const promptService = new PromptService(supabaseClient);
const { data: prompts } = await promptService.listPrompts({
  sortBy: "created_at",
  order: "desc",
  limit: 20,
  offset: 0,
});
---

<Layout title="Prompt Library">
  <main class="container mx-auto p-4">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold">Prompt Library</h1>
      <a href="/prompts/new" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium
        transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring
        bg-primary text-primary-foreground shadow hover:bg-primary/90 h-9 px-4 py-2">
        Create New Prompt
      </a>
    </div>
    <PromptList prompts={prompts} />
  </main>
</Layout>
